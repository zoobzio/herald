---
title: Quickstart
description: Build your first herald integration in 5 minutes.
author: Herald Team
published: 2025-12-06
tags: [Tutorial, Quickstart, Getting Started]
---

# Quickstart

Build your first broker integration in 5 minutes.

## Prerequisites

- Go 1.23+
- A message broker (we'll use the `io` provider for simplicity)

## Installation

```bash
go get github.com/zoobzio/herald
go get github.com/zoobzio/capitan
```

## Step 1: Define Your Event

```go
package main

import (
    "context"
    "encoding/json"
    "fmt"
    "strings"
    "sync"

    "github.com/zoobzio/capitan"
    "github.com/zoobzio/herald"
    heraldio "github.com/zoobzio/herald/io"
)

// Order is the message type
type Order struct {
    ID    string  `json:"id"`
    Total float64 `json:"total"`
}

// Define signal and key
var (
    orderSignal = capitan.NewSignal("order.created", "Order created")
    orderKey    = capitan.NewKey[Order]("order", "app.Order")
)
```

## Step 2: Create a Publisher

```go
func main() {
    ctx := context.Background()

    // Create an io provider (writes to a string buffer)
    var buf strings.Builder
    provider := heraldio.New(heraldio.WithWriter(&buf))

    // Create publisher
    pub := herald.NewPublisher(provider, orderSignal, orderKey, nil)
    pub.Start(ctx)

    // Emit an event - it will be published to the provider
    capitan.Emit(ctx, orderSignal, orderKey.Field(Order{
        ID:    "ORDER-123",
        Total: 99.99,
    }))

    // Drain capitan queues
    capitan.Shutdown()
    pub.Close()

    // See what was published
    fmt.Println("Published:", buf.String())
}
```

Output:
```
Published: {"id":"ORDER-123","total":99.99}
```

## Step 3: Create a Subscriber

```go
func main() {
    ctx := context.Background()

    // Simulate a message from a broker
    message := `{"id":"ORDER-456","total":149.99}`
    provider := heraldio.New(heraldio.WithReader(strings.NewReader(message + "\n")))

    // Track received orders
    var received Order
    var wg sync.WaitGroup
    wg.Add(1)

    // Hook to receive events
    capitan.Hook(orderSignal, func(ctx context.Context, e *capitan.Event) {
        order, ok := orderKey.From(e)
        if ok {
            received = order
            wg.Done()
        }
    })

    // Create subscriber
    sub := herald.NewSubscriber(provider, orderSignal, orderKey, nil)
    sub.Start(ctx)

    // Wait for message to be processed
    wg.Wait()

    fmt.Printf("Received: %+v\n", received)

    sub.Close()
    capitan.Shutdown()
}
```

Output:
```
Received: {ID:ORDER-456 Total:149.99}
```

## Complete Example

Here's a full working example combining both:

```go
package main

import (
    "context"
    "fmt"
    "io"
    "strings"
    "sync"

    "github.com/zoobzio/capitan"
    "github.com/zoobzio/herald"
    heraldio "github.com/zoobzio/herald/io"
)

type Order struct {
    ID    string  `json:"id"`
    Total float64 `json:"total"`
}

var (
    // Publishing signal
    orderCreated = capitan.NewSignal("order.created", "Order created")
    // Receiving signal (different to avoid loops)
    orderReceived = capitan.NewSignal("order.received", "Order received")
    orderKey      = capitan.NewKey[Order]("order", "app.Order")
)

func main() {
    ctx := context.Background()

    // Create a pipe to connect publisher and subscriber
    pr, pw := io.Pipe()

    // Publisher side
    pubProvider := heraldio.New(heraldio.WithWriter(pw))
    pub := herald.NewPublisher(pubProvider, orderCreated, orderKey, nil)
    pub.Start(ctx)

    // Subscriber side
    subProvider := heraldio.New(heraldio.WithReader(pr))
    sub := herald.NewSubscriber(subProvider, orderReceived, orderKey, nil)
    sub.Start(ctx)

    // Track what we receive
    var received Order
    var wg sync.WaitGroup
    wg.Add(1)

    capitan.Hook(orderReceived, func(ctx context.Context, e *capitan.Event) {
        order, ok := orderKey.From(e)
        if ok {
            received = order
            wg.Done()
        }
    })

    // Publish an order
    capitan.Emit(ctx, orderCreated, orderKey.Field(Order{
        ID:    "ORDER-789",
        Total: 249.99,
    }))

    // Wait for round-trip
    wg.Wait()

    fmt.Printf("Published and received: %+v\n", received)

    // Cleanup
    pw.Close()
    sub.Close()
    pub.Close()
    capitan.Shutdown()
}
```

Output:
```
Published and received: {ID:ORDER-789 Total:249.99}
```

## Next Steps

- [Getting Started](./2.getting-started.md) - Deeper introduction with real brokers
- [First Integration](./3.first-integration.md) - Multi-broker workflow
- [Providers Guide](../3.guides/2.providers.md) - Configure Kafka, SQS, NATS, etc.
